<!doctype html>
<html lang="en-US">

<head>
  <meta charset="utf-8">
  <title>02-Predict reviews</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" rel="stylesheet">
  <!-- <link href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.5/css/bulma.min.css" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Raleway:400,700|Open+Sans:400,700&display=swap" rel="stylesheet"> -->
  <link rel="stylesheet" href="/ds4j/css/spectre.min.css">
  <link rel="stylesheet" href="/ds4j/css/spectre-exp.min.css">
  <link rel="stylesheet" href="/ds4j/css/spectre-icons.min.css">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="/ds4j/css/style.css" rel="stylesheet">
  <link href="/ds4j/css/highlight.css" rel="stylesheet">
</head>

<body>
  <div class="nav-holder bg-secondary">
  <div class='content'>
    <header class="navbar">
      <section class="navbar-section">
        <a href="/ds4j/" class="navbar-brand mr-2">DS4J</a>
      </section>
      <section class="navbar-section">
        <a href="/ds4j/projects" class="btn btn-link">Projects</a>
        <a href="/ds4j/topics" class="btn btn-link">Topics</a>
        <a href="/ds4j/curriculum" class="btn btn-link">Curriculum</a>
        <a href="/ds4j/about" class="btn btn-link">About</a>
      </section>
    </header>
  </div>
</div>
  
<div class="content text-based">
  <div class="columns">
    <div class="column col-12 notebook">
      <ul class="breadcrumb">
        <li class="breadcrumb-item">
          <a href="#">Projects</a>
        </li>
        <li class="breadcrumb-item">
          <a href="/ds4j/wapo-app-reviews/">Analyzing online safety through app store reviews</a>
        </li>
        <li class="breadcrumb-item">
          <a href="/ds4j/wapo-app-reviews/02-predict-reviews">02-Predict reviews</a>
        </li>
      </ul>

      <div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Predicting-reports-of-bullying,-racism,-and-unwanted-sexual-behavior-from-app-store-reviews">Predicting reports of bullying, racism, and unwanted sexual behavior from app store reviews<a class="anchor-link" href="#Predicting-reports-of-bullying,-racism,-and-unwanted-sexual-behavior-from-app-store-reviews">#</a></h1><p>In the <a href="https://www.washingtonpost.com/technology/2019/11/22/apple-says-its-app-store-is-safe-trusted-place-we-found-reports-unwanted-sexual-behavior-six-apps-some-targeting-minors/">Washington Post's analysis</a>, they designed a machine learning algorithm to detect patterns of "unsafe" behavior through analyzing App Store reviews. Using a spreadsheet of hand-tagged reviews, we'll both train an algorithm to spot these behaviors as well as learn what words tips our algorithm off.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p class="reading-options">
  <a class="btn" href="/ds4j/wapo-app-reviews/02-predict-reviews">
    <i class="fa fa-sm fa-book"></i>
    Read online
  </a>
  <a class="btn" href="/ds4j/wapo-app-reviews/notebooks/02-Predict reviews.ipynb">
    <i class="fa fa-sm fa-download"></i>
    Download notebook
  </a>
  <a class="btn" href="#">
    <i class="fa fa-sm fa-laptop"></i>
    Interactive version
  </a>
</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s2">&quot;display.max_colwidth&quot;</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;data/reviews-marked.csv&quot;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Review&#39;</span><span class="p">])</span>
<span class="n">df</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(56055, 9)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Country</th>
      <th>Date</th>
      <th>Rating</th>
      <th>Review</th>
      <th>Version</th>
      <th>source</th>
      <th>racism</th>
      <th>bullying</th>
      <th>sexual</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>US</td>
      <td>11/22/2019</td>
      <td>5</td>
      <td>It’s a great app to meet new people and chat in very satisfied with downloading this app i recommend this app if you like to chat or just to meet new people. And you can choose which country To find different users!</td>
      <td>4.4.5</td>
      <td>holla</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>US</td>
      <td>11/22/2019</td>
      <td>5</td>
      <td>Holla is an excellent app, where I get to know new people every time and even get to make new friends. I truly recommend this application to all people!</td>
      <td>4.4.5</td>
      <td>holla</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>US</td>
      <td>11/22/2019</td>
      <td>1</td>
      <td>Get rid of micro transactions or i will find a new app to use. Why should i have to pay for that it’s so stupid</td>
      <td>3.8</td>
      <td>holla</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>US</td>
      <td>11/22/2019</td>
      <td>5</td>
      <td>Free to use app, meet people around the world.</td>
      <td>-</td>
      <td>holla</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>US</td>
      <td>11/21/2019</td>
      <td>5</td>
      <td>I got this app and everything has been different. I’ve met so many interesting people. From around the world. I was recently reunited with my high school girlfriend. We’re getting married. I met and married The love of my Life thanks to Holla. Thanks Holla!!!!!</td>
      <td>4.4.5</td>
      <td>holla</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We've only filled in <code>0</code> and <code>1</code> for racism, bullying and unwanted sexual behavior in a handful of reviews, so we'll filter them into known and unknown. We'll use the known ones to train our classifier, and then run it on unknown to find possible reviews to examine.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">known</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">sexual</span><span class="o">.</span><span class="n">notna</span><span class="p">()]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">unknown</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">sexual</span><span class="o">.</span><span class="n">isna</span><span class="p">()]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">known</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(330, 9)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Vectorize-our-text">Vectorize our text<a class="anchor-link" href="#Vectorize-our-text">#</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>

<span class="kn">from</span> <span class="nn">nltk.stem</span> <span class="kn">import</span> <span class="n">SnowballStemmer</span>
<span class="kn">from</span> <span class="nn">sklearn.feature_extraction.text</span> <span class="kn">import</span> <span class="n">TfidfVectorizer</span>

<span class="n">stemmer</span> <span class="o">=</span> <span class="n">SnowballStemmer</span><span class="p">(</span><span class="s1">&#39;english&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">StemmedTfidfVectorizer</span><span class="p">(</span><span class="n">TfidfVectorizer</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">build_analyzer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">analyzer</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">StemmedTfidfVectorizer</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">build_analyzer</span><span class="p">()</span>
        <span class="k">return</span> <span class="k">lambda</span> <span class="n">doc</span><span class="p">:(</span><span class="n">stemmer</span><span class="o">.</span><span class="n">stem</span><span class="p">(</span><span class="n">word</span><span class="p">)</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">analyzer</span><span class="p">(</span><span class="n">doc</span><span class="p">))</span>

<span class="n">vectorizer</span> <span class="o">=</span> <span class="n">StemmedTfidfVectorizer</span><span class="p">()</span>

<span class="n">X</span> <span class="o">=</span> <span class="n">vectorizer</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">known</span><span class="o">.</span><span class="n">Review</span><span class="p">)</span>
<span class="n">words_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">X</span><span class="o">.</span><span class="n">toarray</span><span class="p">(),</span> <span class="n">columns</span><span class="o">=</span><span class="n">vectorizer</span><span class="o">.</span><span class="n">get_feature_names</span><span class="p">())</span>
<span class="n">words_df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>CPU times: user 197 ms, sys: 6.6 ms, total: 203 ms
Wall time: 216 ms
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>000</th>
      <th>10</th>
      <th>100</th>
      <th>13</th>
      <th>14</th>
      <th>15</th>
      <th>16</th>
      <th>17</th>
      <th>18</th>
      <th>19</th>
      <th>...</th>
      <th>للدردشة</th>
      <th>للرمنسية</th>
      <th>للعب</th>
      <th>مخصص</th>
      <th>مكان</th>
      <th>من</th>
      <th>نطاق</th>
      <th>والصداقة</th>
      <th>وضع</th>
      <th>ومكان</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.116557</td>
      <td>0.0</td>
      <td>0.106118</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 1324 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>What's the split between "normal" reviews and ones featuring unwanted sexual behavior?</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">known</span><span class="o">.</span><span class="n">sexual</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>0.0    314
1.0     16
Name: sexual, dtype: int64</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Train-a-classifier">Train a classifier<a class="anchor-link" href="#Train-a-classifier">#</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>

<span class="kn">from</span> <span class="nn">sklearn.svm</span> <span class="kn">import</span> <span class="n">LinearSVC</span>
<span class="kn">from</span> <span class="nn">sklearn.svm</span> <span class="kn">import</span> <span class="n">SVC</span>
<span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="kn">import</span> <span class="n">LogisticRegression</span>
<span class="kn">from</span> <span class="nn">sklearn.naive_bayes</span> <span class="kn">import</span> <span class="n">MultinomialNB</span>
<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestClassifier</span>
<span class="kn">from</span> <span class="nn">sklearn.calibration</span> <span class="kn">import</span> <span class="n">CalibratedClassifierCV</span>

<span class="n">X</span> <span class="o">=</span> <span class="n">vectorizer</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">known</span><span class="o">.</span><span class="n">Review</span><span class="p">)</span>
<span class="c1">#X = words_df</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">known</span><span class="o">.</span><span class="n">sexual</span>

<span class="c1">#clf = SVC(kernel=&#39;linear&#39;, probability=True, class_weight=&#39;balanced&#39;)</span>
<span class="c1">#clf = LogisticRegression(solver=&#39;lbfgs&#39;, class_weight=&#39;balanced&#39;)</span>
<span class="c1">#clf = MultinomialNB()</span>
<span class="c1">#clf = RandomForestClassifier(n_estimators=100)</span>
<span class="n">clf</span> <span class="o">=</span> <span class="n">LinearSVC</span><span class="p">(</span><span class="n">class_weight</span><span class="o">=</span><span class="s1">&#39;balanced&#39;</span><span class="p">)</span>
<span class="n">clf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="c1"># from imblearn.over_sampling import RandomOverSampler</span>
<span class="c1"># ros = RandomOverSampler()</span>
<span class="c1"># X_resampled, y_resampled = ros.fit_resample(X, y)</span>
<span class="c1"># clf.fit(X_resampled, y_resampled)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>CPU times: user 191 ms, sys: 3.8 ms, total: 195 ms
Wall time: 196 ms
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>LinearSVC(C=1.0, class_weight=&#39;balanced&#39;, dual=True, fit_intercept=True,
          intercept_scaling=1, loss=&#39;squared_hinge&#39;, max_iter=1000,
          multi_class=&#39;ovr&#39;, penalty=&#39;l2&#39;, random_state=None, tol=0.0001,
          verbose=0)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Last time with our vectorizer we used <code>.fit_transform</code>, which taught the vectorizer all of the words in the reviews and then transformed them into numbers the algorithm could understand. This time we just use <code>.transform</code> because <strong>any words not in our original dataset won't actually have meaning</strong>. The algo won't have seen them before, so how could it know what category they might imply?</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">X</span> <span class="o">=</span> <span class="n">vectorizer</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">unknown</span><span class="o">.</span><span class="n">Review</span><span class="p">)</span>

<span class="n">unknown</span><span class="p">[</span><span class="s1">&#39;predicted&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">clf</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="n">unknown</span><span class="p">[</span><span class="s1">&#39;predicted_proba&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">clf</span><span class="o">.</span><span class="n">decision_function</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="c1"># Depending on the classifier, you use .decision_function or .predict_proba</span>
<span class="c1">#unknown[&#39;predicted_proba&#39;] = clf.predict_proba(X)[:, 1]</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">unknown</span><span class="o">.</span><span class="n">predicted</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>0.0    55428
1.0      297
Name: predicted, dtype: int64</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>While there are 297 that have been predicted to probably be about unwanted sexual behavior, we might want to look at more than that!</p>
<p>For a LinearSVC, the closer to <code>0</code> the <code>.decision_function</code>, the more uncertain the classifier is. High positive values mean it's sure the review is unwanted sexual behavior, high negative values means it's sure a review isn't.</p>
<p>Instead of just taking reviews the classifier marked as definitely interesting to us, we could also sort by <code>.decision_function</code> and take the top 500 or 1000, just to be sure to really check those edge cases.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">unknown</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;predicted_proba&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Country</th>
      <th>Date</th>
      <th>Rating</th>
      <th>Review</th>
      <th>Version</th>
      <th>source</th>
      <th>racism</th>
      <th>bullying</th>
      <th>sexual</th>
      <th>predicted</th>
      <th>predicted_proba</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>19428</th>
      <td>US</td>
      <td>11/17/2018</td>
      <td>2</td>
      <td>All the guys on here ever ask for is nudes like I don't want to send my nudes to you</td>
      <td>4.12.1</td>
      <td>skout</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>1.002086</td>
    </tr>
    <tr>
      <th>11002</th>
      <td>US</td>
      <td>06/23/2019</td>
      <td>1</td>
      <td>To many perverts and all they ask for is nudes🙄</td>
      <td>3.9.3</td>
      <td>chat-for-strangers</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>0.974331</td>
    </tr>
    <tr>
      <th>53538</th>
      <td>US</td>
      <td>07/24/2015</td>
      <td>3</td>
      <td>I like this app but there is so many horny guys and they are all 30 and asking for nudes</td>
      <td>3.5</td>
      <td>chat-for-strangers</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>0.791301</td>
    </tr>
    <tr>
      <th>55612</th>
      <td>US</td>
      <td>02/23/2012</td>
      <td>4</td>
      <td>Like a small thing that's pink/ blue to show whether your m or f. That would be nice. And to all the guys out there... Put your dick back in your pants. I'm a guy but I don't creep on girls. There a thing called porn.</td>
      <td>1.4</td>
      <td>chat-for-strangers</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>0.762625</td>
    </tr>
    <tr>
      <th>17338</th>
      <td>US</td>
      <td>04/15/2019</td>
      <td>1</td>
      <td>Basically men/women asking for nudes all I wanted to do is chat with my cousin</td>
      <td>2.85</td>
      <td>chat-for-strangers</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>0.699913</td>
    </tr>
    <tr>
      <th>53557</th>
      <td>US</td>
      <td>07/10/2015</td>
      <td>1</td>
      <td>All the guys on skout are so ugly omg and half of them are fake. Old man posing as 20 year olds. Perverts everywhere. Scammers talking about do you want to make 1500 a month! SMH! This whole app is a joke. Would not recommend if you are looking for a relationship....not even a friendship. If you...</td>
      <td>5.8.2</td>
      <td>skout</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>0.683701</td>
    </tr>
    <tr>
      <th>12030</th>
      <td>US</td>
      <td>11/04/2018</td>
      <td>4</td>
      <td>This app is disgusting. If you look hard enough you will find underaged girls selling their nude photos. And even worse girls are sending nudes to guys over 18 with just a few questions asked</td>
      <td>3.7.2</td>
      <td>holla</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>0.662834</td>
    </tr>
    <tr>
      <th>55129</th>
      <td>US</td>
      <td>07/03/2012</td>
      <td>3</td>
      <td>All there is, is 20 year old men that are perverted and are horny and always wants girls kiks... Well I'm an 11 year old girl and one guy was nice in a minute, and when he came on my kik he was nasty😝!!  Sooo what I'm trying to say is... PLZ BLOCK THE PERVERTS!!</td>
      <td>1.5</td>
      <td>chat-for-strangers</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>0.660950</td>
    </tr>
    <tr>
      <th>50262</th>
      <td>US</td>
      <td>02/18/2013</td>
      <td>5</td>
      <td>Nude nude and more nude</td>
      <td>3.3.1</td>
      <td>skout</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>0.659748</td>
    </tr>
    <tr>
      <th>7849</th>
      <td>US</td>
      <td>03/27/2017</td>
      <td>5</td>
      <td>All guys</td>
      <td>1</td>
      <td>holla</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>0.606504</td>
    </tr>
    <tr>
      <th>39875</th>
      <td>US</td>
      <td>10/13/2013</td>
      <td>1</td>
      <td>The only thing you’re going to get on the site is fake news there is asking me to go on to another site to pay to watch their nudes</td>
      <td>6.3.1</td>
      <td>skout</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>0.583775</td>
    </tr>
    <tr>
      <th>20616</th>
      <td>US</td>
      <td>08/03/2018</td>
      <td>1</td>
      <td>Almost all the guys on the app ask girls for nudes and if you don't send them it they'll literally get upset and unfriend you on either snapchat or yellow itself, the people on there is shallow. 🤧</td>
      <td>2.36</td>
      <td>holla</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>0.582038</td>
    </tr>
    <tr>
      <th>11789</th>
      <td>US</td>
      <td>12/25/2018</td>
      <td>3</td>
      <td>This is almost like a dating app for 11-18 year Olds like the app can't even control if its the persons actual age or not there are SOOO many 11-15 year olds on this and so many of them are sending nudes or asking for nudes on there bio🙄</td>
      <td>3.16.1</td>
      <td>holla</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>0.573855</td>
    </tr>
    <tr>
      <th>11668</th>
      <td>US</td>
      <td>01/16/2019</td>
      <td>5</td>
      <td>AHAHAH it’s so funny bc most guys ask for nudes and it’s DeFInEtlEy WhErE yOu FiNd YoUr SoUlMaTe</td>
      <td>3.17.1</td>
      <td>holla</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>0.560901</td>
    </tr>
    <tr>
      <th>30392</th>
      <td>US</td>
      <td>10/05/2014</td>
      <td>1</td>
      <td>Six 18yd men asked for nudes I’m 13</td>
      <td>3.27</td>
      <td>holla</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>0.557822</td>
    </tr>
    <tr>
      <th>18920</th>
      <td>US</td>
      <td>12/23/2018</td>
      <td>2</td>
      <td>Buncha horn dogs (all guys want is sexy pics) and all girls do is show cleavage and their behind)</td>
      <td>4.1.1</td>
      <td>skout</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>0.554121</td>
    </tr>
    <tr>
      <th>27638</th>
      <td>US</td>
      <td>03/22/2015</td>
      <td>4</td>
      <td>Good app to get.  If your horny the only things that they do is ask for nudes</td>
      <td>4.7.0</td>
      <td>skout</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>0.548237</td>
    </tr>
    <tr>
      <th>38366</th>
      <td>US</td>
      <td>11/20/2013</td>
      <td>1</td>
      <td>People on here can sometimes be rude and the guys are just idiots. Being a guy that is saying something. Both guys and girls on this app ask for nudes. It's kind of annoying.</td>
      <td>4.7.0</td>
      <td>skout</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>0.529622</td>
    </tr>
    <tr>
      <th>21765</th>
      <td>US</td>
      <td>05/12/2018</td>
      <td>1</td>
      <td>A lot of the guys on here alway ask if I'm horny and other kik me and ask me to send nudes. This app is not worth downloading</td>
      <td>3.5</td>
      <td>chat-for-strangers</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>0.490907</td>
    </tr>
    <tr>
      <th>19941</th>
      <td>US</td>
      <td>09/30/2018</td>
      <td>1</td>
      <td>All the guys ask is if your a girl</td>
      <td>2.4</td>
      <td>chat-for-strangers</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>0.486325</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>While we looked at them in the notebook here, it's probably better to save them to a CSV and take a better look later. We'll take the <strong>top 500 most likely</strong> for later research.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">to_investigate</span> <span class="o">=</span> <span class="n">unknown</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;predicted_proba&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
<span class="n">to_investigate</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;data/to-investigate.csv&quot;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Explaining-our-classifier">Explaining our classifier<a class="anchor-link" href="#Explaining-our-classifier">#</a></h3><p>While we're at it, what's the classifier even doing? We can assume that it's looking at the words and figuring out that certain words signal unwanted sexual behavior or not, but which words do which things?</p>
<p>This is called <strong>explainability</strong>, and it's a big part of being able to argue about whether your machine learning algorithm makes sense or not. The specific question of which words are more or less important is called <strong>feature importance</strong>.</p>
<p>There's a lot of different, somewhat complicated ways to ask scikit-learn what features are important, but there's a Python library called <a href="https://eli5.readthedocs.io/">eli5</a> that does an almost-perfect job making it only take one line of code.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">eli5</span>

<span class="c1"># eli5 gets our classifier and our vectorizer, so it knows what</span>
<span class="c1"># numbers are what words (otherwise you just get numbers and weights)</span>
<span class="n">eli5</span><span class="o">.</span><span class="n">explain_weights</span><span class="p">(</span><span class="n">clf</span><span class="p">,</span> <span class="n">vec</span><span class="o">=</span><span class="n">vectorizer</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">

    <style>
    table.eli5-weights tr:hover {
        filter: brightness(85%);
    }
</style>



    

    

    

    

    

    


    

    

    

    
        

    

        
            
                
                
    
        <p style="margin-bottom: 0.5em; margin-top: 0em">
            <b>
    
        y=1.0
    
</b>

top features
        </p>
    
    <table class="eli5-weights"
           style="border-collapse: collapse; border: none; margin-top: 0em; table-layout: auto; margin-bottom: 2em;">
        <thead>
        <tr style="border: none;">
            
                <th style="padding: 0 1em 0 0.5em; text-align: right; border: none;" title="Feature weights. Note that weights do not account for feature value scales, so if feature values have different scales, features with highest weights might not be the most important.">
                    Weight<sup>?</sup>
                </th>
            
            <th style="padding: 0 0.5em 0 0.5em; text-align: left; border: none;">Feature</th>
            
        </tr>
        </thead>
        <tbody>
        
            <tr style="background-color: hsl(120, 100.00%, 80.00%); border: none;">
    <td style="padding: 0 1em 0 0.5em; text-align: right; border: none;">
        +1.684
    </td>
    <td style="padding: 0 0.5em 0 0.5em; text-align: left; border: none;">
        nude
    </td>
    
</tr>
        
            <tr style="background-color: hsl(120, 100.00%, 81.88%); border: none;">
    <td style="padding: 0 1em 0 0.5em; text-align: right; border: none;">
        +1.463
    </td>
    <td style="padding: 0 0.5em 0 0.5em; text-align: left; border: none;">
        guy
    </td>
    
</tr>
        
            <tr style="background-color: hsl(120, 100.00%, 84.36%); border: none;">
    <td style="padding: 0 1em 0 0.5em; text-align: right; border: none;">
        +1.186
    </td>
    <td style="padding: 0 0.5em 0 0.5em; text-align: left; border: none;">
        pervert
    </td>
    
</tr>
        
            <tr style="background-color: hsl(120, 100.00%, 84.71%); border: none;">
    <td style="padding: 0 1em 0 0.5em; text-align: right; border: none;">
        +1.147
    </td>
    <td style="padding: 0 0.5em 0 0.5em; text-align: left; border: none;">
        men
    </td>
    
</tr>
        
            <tr style="background-color: hsl(120, 100.00%, 85.32%); border: none;">
    <td style="padding: 0 1em 0 0.5em; text-align: right; border: none;">
        +1.083
    </td>
    <td style="padding: 0 0.5em 0 0.5em; text-align: left; border: none;">
        jack
    </td>
    
</tr>
        
            <tr style="background-color: hsl(120, 100.00%, 85.54%); border: none;">
    <td style="padding: 0 1em 0 0.5em; text-align: right; border: none;">
        +1.060
    </td>
    <td style="padding: 0 0.5em 0 0.5em; text-align: left; border: none;">
        find
    </td>
    
</tr>
        
            <tr style="background-color: hsl(120, 100.00%, 85.69%); border: none;">
    <td style="padding: 0 1em 0 0.5em; text-align: right; border: none;">
        +1.045
    </td>
    <td style="padding: 0 0.5em 0 0.5em; text-align: left; border: none;">
        thing
    </td>
    
</tr>
        
            <tr style="background-color: hsl(120, 100.00%, 86.31%); border: none;">
    <td style="padding: 0 1em 0 0.5em; text-align: right; border: none;">
        +0.980
    </td>
    <td style="padding: 0 0.5em 0 0.5em; text-align: left; border: none;">
        dick
    </td>
    
</tr>
        
            <tr style="background-color: hsl(120, 100.00%, 87.43%); border: none;">
    <td style="padding: 0 1em 0 0.5em; text-align: right; border: none;">
        +0.868
    </td>
    <td style="padding: 0 0.5em 0 0.5em; text-align: left; border: none;">
        off
    </td>
    
</tr>
        
            <tr style="background-color: hsl(120, 100.00%, 87.78%); border: none;">
    <td style="padding: 0 1em 0 0.5em; text-align: right; border: none;">
        +0.833
    </td>
    <td style="padding: 0 0.5em 0 0.5em; text-align: left; border: none;">
        on
    </td>
    
</tr>
        
            <tr style="background-color: hsl(120, 100.00%, 88.07%); border: none;">
    <td style="padding: 0 1em 0 0.5em; text-align: right; border: none;">
        +0.805
    </td>
    <td style="padding: 0 0.5em 0 0.5em; text-align: left; border: none;">
        without
    </td>
    
</tr>
        
            <tr style="background-color: hsl(120, 100.00%, 88.63%); border: none;">
    <td style="padding: 0 1em 0 0.5em; text-align: right; border: none;">
        +0.752
    </td>
    <td style="padding: 0 0.5em 0 0.5em; text-align: left; border: none;">
        gal
    </td>
    
</tr>
        
            <tr style="background-color: hsl(120, 100.00%, 88.78%); border: none;">
    <td style="padding: 0 1em 0 0.5em; text-align: right; border: none;">
        +0.737
    </td>
    <td style="padding: 0 0.5em 0 0.5em; text-align: left; border: none;">
        filter
    </td>
    
</tr>
        
            <tr style="background-color: hsl(120, 100.00%, 88.93%); border: none;">
    <td style="padding: 0 1em 0 0.5em; text-align: right; border: none;">
        +0.724
    </td>
    <td style="padding: 0 0.5em 0 0.5em; text-align: left; border: none;">
        all
    </td>
    
</tr>
        
            <tr style="background-color: hsl(120, 100.00%, 89.22%); border: none;">
    <td style="padding: 0 1em 0 0.5em; text-align: right; border: none;">
        +0.697
    </td>
    <td style="padding: 0 0.5em 0 0.5em; text-align: left; border: none;">
        goe
    </td>
    
</tr>
        
            <tr style="background-color: hsl(120, 100.00%, 89.42%); border: none;">
    <td style="padding: 0 1em 0 0.5em; text-align: right; border: none;">
        +0.679
    </td>
    <td style="padding: 0 0.5em 0 0.5em; text-align: left; border: none;">
        their
    </td>
    
</tr>
        
            <tr style="background-color: hsl(120, 100.00%, 89.51%); border: none;">
    <td style="padding: 0 1em 0 0.5em; text-align: right; border: none;">
        +0.670
    </td>
    <td style="padding: 0 0.5em 0 0.5em; text-align: left; border: none;">
        pay
    </td>
    
</tr>
        
            <tr style="background-color: hsl(120, 100.00%, 89.70%); border: none;">
    <td style="padding: 0 1em 0 0.5em; text-align: right; border: none;">
        +0.652
    </td>
    <td style="padding: 0 0.5em 0 0.5em; text-align: left; border: none;">
        ask
    </td>
    
</tr>
        
        
            <tr style="background-color: hsl(120, 100.00%, 89.70%); border: none;">
                <td colspan="2" style="padding: 0 0.5em 0 0.5em; text-align: center; border: none; white-space: nowrap;">
                    <i>&hellip; 292 more positive &hellip;</i>
                </td>
            </tr>
        

        
            <tr style="background-color: hsl(0, 100.00%, 88.67%); border: none;">
                <td colspan="2" style="padding: 0 0.5em 0 0.5em; text-align: center; border: none; white-space: nowrap;">
                    <i>&hellip; 914 more negative &hellip;</i>
                </td>
            </tr>
        
        
            <tr style="background-color: hsl(0, 100.00%, 88.67%); border: none;">
    <td style="padding: 0 1em 0 0.5em; text-align: right; border: none;">
        -0.748
    </td>
    <td style="padding: 0 0.5em 0 0.5em; text-align: left; border: none;">
        it
    </td>
    
</tr>
        
            <tr style="background-color: hsl(0, 100.00%, 86.10%); border: none;">
    <td style="padding: 0 1em 0 0.5em; text-align: right; border: none;">
        -1.001
    </td>
    <td style="padding: 0 0.5em 0 0.5em; text-align: left; border: none;">
        &lt;BIAS&gt;
    </td>
    
</tr>
        

        </tbody>
    </table>

            
        

        



    

    

    

    


    

    

    

    

    

    


    

    

    

    

    

    




</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Seems reasonable.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Review">Review<a class="anchor-link" href="#Review">#</a></h2><p>We have a lot of app store reviews, some of which we have <strong>manually tagged</strong> for certain kinds of behavior. We use those to <strong>train</strong> a machine learning algorithm, teaching it which words are associated with which kinds of behavior.</p>
<p>After we've trained the algorithm on our <strong>known, labeled reviews</strong> we can then send it <strong>unknown reviews</strong>, and it will flag those we need to review. Since we don't mind reviewing a large number of reviews, we also save a handful that the algorithm flagged as barely not-interesting.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Discussion-topics">Discussion topics<a class="anchor-link" href="#Discussion-topics">#</a></h2><p>Did we label enough reviews?</p>
<p>Beyond the idea of "more data is better," why might we want to label more reviews? Think about using <code>.fit_transform</code> vs just <code>.transform</code>.</p>
<p>If we need to label more reviews, would it be helpful to search for words like "nude" and "guy" to see if we can easily track down some unwanted sexual behavior? Or should we just keep going one-by-one?</p>
<p>Why did we use a <strong>stemmer?</strong> If we had thousands of labeled reviews instead of just a few dozen, would that have been as necessary?</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>

    </div>
</div>
</div>

</div>
 


    </div>
  </div>
</div>

<script>
  [...document.querySelectorAll(".code_cell")].filter(cell => cell.innerText.trim().length === 0).forEach(cell => cell.remove())
</script>

  <div class="footer bg-secondary">
  <div class="content">
    <div class="columns">
      <div class="column col-6 col-sm-12">
        <p><strong>Hi, welcome to Data Science for Journalism!</strong></p>
        <p>There's been a lot of buzz about machine learning and "artificial intelligence" being used in stories over
          the past few years. It's mostly not that complicated - a little stats, a classifier here or there - but it's
          hard to know where to start without a little help.</p>
        <p>Hopefully this site can be that help! <a href="/ds4j/about">Learn more about this project here.</a></p>
      </div>
      <div class="column col-3 col-sm-6">
        <p><strong>Quick links</strong></p>
        <!-- <p><a href="#">Something here</a></p>
        <p><a href="#">Something here</a></p>
        <p><a href="#">Something here</a></p> -->
      </div>
      <div class="column col-3 col-sm6">
        <p><strong>Contact</strong></p>
        <p><a href="mailto:hello@littlecolumns.com">hello@littlecolumns.com</a></p>
      </div>
    </div>
  </div>
</div>
  <script src="/ds4j/js/tocbot.js"></script>

  <script>
    try {
      let toc = document.createElement("div")
      toc.setAttribute('class', 'js-toc')
      document.querySelector(".reading-options").parentNode.appendChild(toc)
    } catch (err) {

    }

    // Chapter TOC
    tocbot.init({
      // Where to render the table of contents.
      tocSelector: '.js-toc',
      // Where to grab the headings to build the table of contents.
      contentSelector: '.notebook',
      // Which headings to grab inside of the contentSelector element.
      headingSelector: 'h1, h2, h3, h4',
      activeLinkClass: 'active',
      listClass: 'nav',
      listItemClass: 'nav-item',
      headingLabelCallback: function (label) {
        return label.replace("#", "")
      }
    });
  </script>

</body>

</html>