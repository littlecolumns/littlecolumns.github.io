<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2.5 Final prep for analysis | _main.utf8.md</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.14 and GitBook 2.6.7" />

  <meta property="og:title" content="2.5 Final prep for analysis | _main.utf8.md" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2.5 Final prep for analysis | _main.utf8.md" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="merging-our-datasets.html"/>
<link rel="next" href="linear-regression.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  { color: #cccccc; background-color: #303030; }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ffcfaf; } /* Alert */
code span.an { color: #7f9f7f; font-weight: bold; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #dca3a3; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #f0dfaf; } /* ControlFlow */
code span.ch { color: #dca3a3; } /* Char */
code span.cn { color: #dca3a3; font-weight: bold; } /* Constant */
code span.co { color: #7f9f7f; } /* Comment */
code span.cv { color: #7f9f7f; font-weight: bold; } /* CommentVar */
code span.do { color: #7f9f7f; } /* Documentation */
code span.dt { color: #dfdfbf; } /* DataType */
code span.dv { color: #dcdccc; } /* DecVal */
code span.er { color: #c3bf9f; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #c0bed1; } /* Float */
code span.fu { color: #efef8f; } /* Function */
code span.im { } /* Import */
code span.in { color: #7f9f7f; font-weight: bold; } /* Information */
code span.kw { color: #f0dfaf; } /* Keyword */
code span.op { color: #f0efd0; } /* Operator */
code span.ot { color: #efef8f; } /* Other */
code span.pp { color: #ffcfaf; font-weight: bold; } /* Preprocessor */
code span.sc { color: #dca3a3; } /* SpecialChar */
code span.ss { color: #cc9393; } /* SpecialString */
code span.st { color: #cc9393; } /* String */
code span.va { } /* Variable */
code span.vs { color: #cc9393; } /* VerbatimString */
code span.wa { color: #7f9f7f; font-weight: bold; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i><b>2</b> Preface</a><ul>
<li class="chapter" data-level="2.0.1" data-path="preface.html"><a href="preface.html#the-original-story"><i class="fa fa-check"></i><b>2.0.1</b> The original story</a></li>
<li class="chapter" data-level="2.0.2" data-path="preface.html"><a href="preface.html#more-stuff-here"><i class="fa fa-check"></i><b>2.0.2</b> More stuff here?</a></li>
<li class="chapter" data-level="2.1" data-path="turning-our-question-into-measureables.html"><a href="turning-our-question-into-measureables.html"><i class="fa fa-check"></i><b>2.1</b> Turning our question into measureables</a><ul>
<li class="chapter" data-level="2.1.1" data-path="turning-our-question-into-measureables.html"><a href="turning-our-question-into-measureables.html#data-potholes"><i class="fa fa-check"></i><b>2.1.1</b> Data: Potholes</a></li>
<li class="chapter" data-level="2.1.2" data-path="turning-our-question-into-measureables.html"><a href="turning-our-question-into-measureables.html#data-number-of-minorities-in-a-neighborhood"><i class="fa fa-check"></i><b>2.1.2</b> Data: Number of minorities in a neighborhood</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="combining-our-datasets.html"><a href="combining-our-datasets.html"><i class="fa fa-check"></i><b>2.2</b> Combining our datasets</a><ul>
<li class="chapter" data-level="2.2.1" data-path="combining-our-datasets.html"><a href="combining-our-datasets.html#merging-census-data-and-pothole-data"><i class="fa fa-check"></i><b>2.2.1</b> Merging Census data and pothole data</a></li>
<li class="chapter" data-level="2.2.2" data-path="combining-our-datasets.html"><a href="combining-our-datasets.html#performing-the-geocoding"><i class="fa fa-check"></i><b>2.2.2</b> Performing the geocoding</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="attaching-tract-data-to-our-latitudes-and-longitudes.html"><a href="attaching-tract-data-to-our-latitudes-and-longitudes.html"><i class="fa fa-check"></i><b>2.3</b> Attaching tract data to our latitudes and longitudes</a><ul>
<li class="chapter" data-level="2.3.1" data-path="attaching-tract-data-to-our-latitudes-and-longitudes.html"><a href="attaching-tract-data-to-our-latitudes-and-longitudes.html#joining-attributes-by-location"><i class="fa fa-check"></i><b>2.3.1</b> Joining attributes by location</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="merging-our-datasets.html"><a href="merging-our-datasets.html"><i class="fa fa-check"></i><b>2.4</b> Merging our datasets</a></li>
<li class="chapter" data-level="2.5" data-path="final-prep-for-analysis.html"><a href="final-prep-for-analysis.html"><i class="fa fa-check"></i><b>2.5</b> Final prep for analysis</a><ul>
<li class="chapter" data-level="2.5.1" data-path="final-prep-for-analysis.html"><a href="final-prep-for-analysis.html#the-amount-of-minorities"><i class="fa fa-check"></i><b>2.5.1</b> “The amount of minorities”</a></li>
<li class="chapter" data-level="2.5.2" data-path="final-prep-for-analysis.html"><a href="final-prep-for-analysis.html#how-long-it-takes-to-fix-potholes"><i class="fa fa-check"></i><b>2.5.2</b> “How long it takes to fix potholes”</a></li>
<li class="chapter" data-level="2.5.3" data-path="final-prep-for-analysis.html"><a href="final-prep-for-analysis.html#removing-missing-data"><i class="fa fa-check"></i><b>2.5.3</b> Removing missing data</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="linear-regression.html"><a href="linear-regression.html"><i class="fa fa-check"></i><b>2.6</b> Linear Regression</a><ul>
<li class="chapter" data-level="2.6.1" data-path="linear-regression.html"><a href="linear-regression.html#correlation"><i class="fa fa-check"></i><b>2.6.1</b> Correlation</a></li>
<li class="chapter" data-level="2.6.2" data-path="linear-regression.html"><a href="linear-regression.html#linear-regression-1"><i class="fa fa-check"></i><b>2.6.2</b> Linear Regression</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="alternative-techniques.html"><a href="alternative-techniques.html"><i class="fa fa-check"></i><b>2.7</b> Alternative techniques</a><ul>
<li class="chapter" data-level="2.7.1" data-path="alternative-techniques.html"><a href="alternative-techniques.html#binning"><i class="fa fa-check"></i><b>2.7.1</b> Binning</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="adding-to-our-analysis.html"><a href="adding-to-our-analysis.html"><i class="fa fa-check"></i><b>2.8</b> Adding to our analysis</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="final-prep-for-analysis" class="section level2">
<h2><span class="header-section-number">2.5</span> Final prep for analysis</h2>
<p>Let’s go back to our question: “in Milwaukee, is there a relationship between how many minorities are in a neigborhood, and how long it takes to fix potholes there?”</p>
<p>We have two things we’re measuring:</p>
<ol style="list-style-type: decimal">
<li>The amount of minorities</li>
<li>How long it takes to fix potholes</li>
</ol>
<p>Before we do our analysis, we’ll need to <strong>see how (or if) our dataset is able to represent these concepts</strong>. Before we dive in, let’s read in our final (?) merged dataset and take a look at what we have.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb39-1"><a href="final-prep-for-analysis.html#cb39-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">&quot;data/2013-complete.csv&quot;</span>)</span>
<span id="cb39-2"><a href="final-prep-for-analysis.html#cb39-2"></a>df.head()</span></code></pre></div>
<div class='table-wrapper'>
<table>
<thead>
<tr>
<th style="text-align:left;">
EnterDt
</th>
<th style="text-align:left;">
PrintDt
</th>
<th style="text-align:left;">
ResolvDt
</th>
<th style="text-align:left;">
address
</th>
<th style="text-align:right;">
GEOID
</th>
<th style="text-align:right;">
Geo_FIPS
</th>
<th style="text-align:right;">
SE_A04001_001
</th>
<th style="text-align:right;">
SE_A04001_002
</th>
<th style="text-align:right;">
SE_A04001_003
</th>
<th style="text-align:right;">
SE_A04001_004
</th>
<th style="text-align:right;">
SE_A04001_005
</th>
<th style="text-align:right;">
SE_A04001_006
</th>
<th style="text-align:right;">
SE_A04001_007
</th>
<th style="text-align:right;">
SE_A04001_008
</th>
<th style="text-align:right;">
SE_A04001_009
</th>
<th style="text-align:right;">
SE_A04001_010
</th>
<th style="text-align:right;">
SE_A04001_011
</th>
<th style="text-align:right;">
SE_A04001_012
</th>
<th style="text-align:right;">
SE_A04001_013
</th>
<th style="text-align:right;">
SE_A04001_014
</th>
<th style="text-align:right;">
SE_A04001_015
</th>
<th style="text-align:right;">
SE_A04001_016
</th>
<th style="text-align:right;">
SE_A04001_017
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
2013-07-15 23:35
</td>
<td style="text-align:left;">
2013-07-16 05:46
</td>
<td style="text-align:left;">
2013-07-17 05:50
</td>
<td style="text-align:left;">
3839 N 10TH ST
</td>
<td style="text-align:right;">
55079004500
</td>
<td style="text-align:right;">
55079004500
</td>
<td style="text-align:right;">
3160
</td>
<td style="text-align:right;">
3053
</td>
<td style="text-align:right;">
76
</td>
<td style="text-align:right;">
2854
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
84
</td>
<td style="text-align:right;">
107
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
74
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2013-07-15 20:05
</td>
<td style="text-align:left;">
2013-07-16 05:46
</td>
<td style="text-align:left;">
2013-07-24 16:58
</td>
<td style="text-align:left;">
4900 W MELVINA ST
</td>
<td style="text-align:right;">
55079003800
</td>
<td style="text-align:right;">
55079003800
</td>
<td style="text-align:right;">
2323
</td>
<td style="text-align:right;">
2276
</td>
<td style="text-align:right;">
205
</td>
<td style="text-align:right;">
2007
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
64
</td>
<td style="text-align:right;">
47
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
47
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2013-07-15 20:00
</td>
<td style="text-align:left;">
2013-07-16 05:56
</td>
<td style="text-align:left;">
2013-07-25 14:42
</td>
<td style="text-align:left;">
2400 W WISCONSIN AV
</td>
<td style="text-align:right;">
55079014900
</td>
<td style="text-align:right;">
55079014900
</td>
<td style="text-align:right;">
1275
</td>
<td style="text-align:right;">
1113
</td>
<td style="text-align:right;">
514
</td>
<td style="text-align:right;">
538
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
50
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
162
</td>
<td style="text-align:right;">
148
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2013-07-15 19:55
</td>
<td style="text-align:left;">
2013-07-16 05:46
</td>
<td style="text-align:left;">
2013-07-18 06:06
</td>
<td style="text-align:left;">
1800 W HAMPTON AV
</td>
<td style="text-align:right;">
55079002300
</td>
<td style="text-align:right;">
55079002300
</td>
<td style="text-align:right;">
4078
</td>
<td style="text-align:right;">
4063
</td>
<td style="text-align:right;">
179
</td>
<td style="text-align:right;">
3765
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
38
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
81
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:left;">
2013-07-15 19:50
</td>
<td style="text-align:left;">
2013-07-16 05:46
</td>
<td style="text-align:left;">
2013-08-02 06:08
</td>
<td style="text-align:left;">
4718 N 19TH ST
</td>
<td style="text-align:right;">
55079002300
</td>
<td style="text-align:right;">
55079002300
</td>
<td style="text-align:right;">
4078
</td>
<td style="text-align:right;">
4063
</td>
<td style="text-align:right;">
179
</td>
<td style="text-align:right;">
3765
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
38
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
81
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
7
</td>
</tr>
</tbody>
</table>
</div>
<p>A lot of those columns are weird census codes, but we’ll let them stay for now - we can always look them up in the census table’s data dictionary later.</p>
<div id="the-amount-of-minorities" class="section level3">
<h3><span class="header-section-number">2.5.1</span> “The amount of minorities”</h3>
<p>First, <strong>what counts as “minorities?”</strong></p>
<p>We decided that everyone whose race is not White - Asian, African-American, etc - gets counted as a minority, along with everyone who is marked as Hispanic/Latino, <em>even if they’re White</em>. So we’re looking specifically for White non-Hispanics.</p>
<p>If we open up the data dictionary - <code>R12217898.txt</code> - we can see that <code>A04001_003</code> is the column of our White Non-Hispanics. In fact it’s <code>SE_A04001_003</code> thanks to Social Explorer, but you get the idea.</p>
<p>Now, in our sentence we said “the amount of minorities” - but is this raw number really what we want? No way! We want a <strong>percentage of minorities</strong>. We could add up each and every one of those other columns, or we could just… calculate the percent of non-Hispanic Whites instead. It’s easier, right?</p>
<p>According to our data dictionary <code>A04001_001</code> is our total population and <code>A04001_003</code> is our non-Hispanic white population, so simple division will get us what we need. After the computation, we can drop all of the other columns that came along with the census.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb40-1"><a href="final-prep-for-analysis.html#cb40-1"></a><span class="co"># Calculate</span></span>
<span id="cb40-2"><a href="final-prep-for-analysis.html#cb40-2"></a>df[<span class="st">&#39;pct_white&#39;</span>] <span class="op">=</span> df.SE_A04001_003 <span class="op">/</span> df.SE_A04001_001</span>
<span id="cb40-3"><a href="final-prep-for-analysis.html#cb40-3"></a></span>
<span id="cb40-4"><a href="final-prep-for-analysis.html#cb40-4"></a><span class="co"># Drop the extra columns</span></span>
<span id="cb40-5"><a href="final-prep-for-analysis.html#cb40-5"></a>se_columns <span class="op">=</span> df.columns[df.columns.<span class="bu">str</span>.contains(<span class="st">&quot;SE_&quot;</span>)]</span>
<span id="cb40-6"><a href="final-prep-for-analysis.html#cb40-6"></a>df <span class="op">=</span> df.drop(columns<span class="op">=</span>se_columns)</span>
<span id="cb40-7"><a href="final-prep-for-analysis.html#cb40-7"></a></span>
<span id="cb40-8"><a href="final-prep-for-analysis.html#cb40-8"></a>df.head()</span></code></pre></div>
<div class='table-wrapper'>
<table>
<thead>
<tr>
<th style="text-align:left;">
EnterDt
</th>
<th style="text-align:left;">
PrintDt
</th>
<th style="text-align:left;">
ResolvDt
</th>
<th style="text-align:left;">
address
</th>
<th style="text-align:right;">
GEOID
</th>
<th style="text-align:right;">
Geo_FIPS
</th>
<th style="text-align:right;">
pct_white
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
2013-07-15 23:35
</td>
<td style="text-align:left;">
2013-07-16 05:46
</td>
<td style="text-align:left;">
2013-07-17 05:50
</td>
<td style="text-align:left;">
3839 N 10TH ST
</td>
<td style="text-align:right;">
55079004500
</td>
<td style="text-align:right;">
55079004500
</td>
<td style="text-align:right;">
0.0240506
</td>
</tr>
<tr>
<td style="text-align:left;">
2013-07-15 20:05
</td>
<td style="text-align:left;">
2013-07-16 05:46
</td>
<td style="text-align:left;">
2013-07-24 16:58
</td>
<td style="text-align:left;">
4900 W MELVINA ST
</td>
<td style="text-align:right;">
55079003800
</td>
<td style="text-align:right;">
55079003800
</td>
<td style="text-align:right;">
0.0882480
</td>
</tr>
<tr>
<td style="text-align:left;">
2013-07-15 20:00
</td>
<td style="text-align:left;">
2013-07-16 05:56
</td>
<td style="text-align:left;">
2013-07-25 14:42
</td>
<td style="text-align:left;">
2400 W WISCONSIN AV
</td>
<td style="text-align:right;">
55079014900
</td>
<td style="text-align:right;">
55079014900
</td>
<td style="text-align:right;">
0.4031373
</td>
</tr>
<tr>
<td style="text-align:left;">
2013-07-15 19:55
</td>
<td style="text-align:left;">
2013-07-16 05:46
</td>
<td style="text-align:left;">
2013-07-18 06:06
</td>
<td style="text-align:left;">
1800 W HAMPTON AV
</td>
<td style="text-align:right;">
55079002300
</td>
<td style="text-align:right;">
55079002300
</td>
<td style="text-align:right;">
0.0438941
</td>
</tr>
<tr>
<td style="text-align:left;">
2013-07-15 19:50
</td>
<td style="text-align:left;">
2013-07-16 05:46
</td>
<td style="text-align:left;">
2013-08-02 06:08
</td>
<td style="text-align:left;">
4718 N 19TH ST
</td>
<td style="text-align:right;">
55079002300
</td>
<td style="text-align:right;">
55079002300
</td>
<td style="text-align:right;">
0.0438941
</td>
</tr>
</tbody>
</table>
</div>
<p>This calculation gives us a number 0-1 for percent of non-Hispanic Whites, so 0.25 would be 25% and 0.75 would be 75%. Nothing too crazy, and we’ll leave it alone for now.</p>
<p>If we really want the percent of minorities, we can just subtract the percent white from 1. We might use it later, so let’s do that calculation now.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb41-1"><a href="final-prep-for-analysis.html#cb41-1"></a>df[<span class="st">&#39;pct_minority&#39;</span>] <span class="op">=</span> <span class="dv">1</span> <span class="op">-</span> df.pct_white</span>
<span id="cb41-2"><a href="final-prep-for-analysis.html#cb41-2"></a>df.head()</span></code></pre></div>
<div class='table-wrapper'>
<table>
<thead>
<tr>
<th style="text-align:left;">
EnterDt
</th>
<th style="text-align:left;">
PrintDt
</th>
<th style="text-align:left;">
ResolvDt
</th>
<th style="text-align:left;">
address
</th>
<th style="text-align:right;">
GEOID
</th>
<th style="text-align:right;">
Geo_FIPS
</th>
<th style="text-align:right;">
pct_white
</th>
<th style="text-align:right;">
pct_minority
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
2013-07-15 23:35
</td>
<td style="text-align:left;">
2013-07-16 05:46
</td>
<td style="text-align:left;">
2013-07-17 05:50
</td>
<td style="text-align:left;">
3839 N 10TH ST
</td>
<td style="text-align:right;">
55079004500
</td>
<td style="text-align:right;">
55079004500
</td>
<td style="text-align:right;">
0.0240506
</td>
<td style="text-align:right;">
0.9759494
</td>
</tr>
<tr>
<td style="text-align:left;">
2013-07-15 20:05
</td>
<td style="text-align:left;">
2013-07-16 05:46
</td>
<td style="text-align:left;">
2013-07-24 16:58
</td>
<td style="text-align:left;">
4900 W MELVINA ST
</td>
<td style="text-align:right;">
55079003800
</td>
<td style="text-align:right;">
55079003800
</td>
<td style="text-align:right;">
0.0882480
</td>
<td style="text-align:right;">
0.9117520
</td>
</tr>
<tr>
<td style="text-align:left;">
2013-07-15 20:00
</td>
<td style="text-align:left;">
2013-07-16 05:56
</td>
<td style="text-align:left;">
2013-07-25 14:42
</td>
<td style="text-align:left;">
2400 W WISCONSIN AV
</td>
<td style="text-align:right;">
55079014900
</td>
<td style="text-align:right;">
55079014900
</td>
<td style="text-align:right;">
0.4031373
</td>
<td style="text-align:right;">
0.5968627
</td>
</tr>
<tr>
<td style="text-align:left;">
2013-07-15 19:55
</td>
<td style="text-align:left;">
2013-07-16 05:46
</td>
<td style="text-align:left;">
2013-07-18 06:06
</td>
<td style="text-align:left;">
1800 W HAMPTON AV
</td>
<td style="text-align:right;">
55079002300
</td>
<td style="text-align:right;">
55079002300
</td>
<td style="text-align:right;">
0.0438941
</td>
<td style="text-align:right;">
0.9561059
</td>
</tr>
<tr>
<td style="text-align:left;">
2013-07-15 19:50
</td>
<td style="text-align:left;">
2013-07-16 05:46
</td>
<td style="text-align:left;">
2013-08-02 06:08
</td>
<td style="text-align:left;">
4718 N 19TH ST
</td>
<td style="text-align:right;">
55079002300
</td>
<td style="text-align:right;">
55079002300
</td>
<td style="text-align:right;">
0.0438941
</td>
<td style="text-align:right;">
0.9561059
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="how-long-it-takes-to-fix-potholes" class="section level3">
<h3><span class="header-section-number">2.5.2</span> “How long it takes to fix potholes”</h3>
<p>The time it takes to fix potholes seems pretty easy - it’s just the difference between when it got filed and when it got fixed, right? First we’ll convert the columns to datetimes, then we’ll subtract them.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb42-1"><a href="final-prep-for-analysis.html#cb42-1"></a>df[<span class="st">&#39;EnterDt&#39;</span>] <span class="op">=</span> pd.to_datetime(df.EnterDt)</span>
<span id="cb42-2"><a href="final-prep-for-analysis.html#cb42-2"></a>df[<span class="st">&#39;ResolvDt&#39;</span>] <span class="op">=</span> pd.to_datetime(df.ResolvDt)</span>
<span id="cb42-3"><a href="final-prep-for-analysis.html#cb42-3"></a>df[<span class="st">&#39;wait_time&#39;</span>] <span class="op">=</span> df.ResolvDt <span class="op">-</span> df.EnterDt</span>
<span id="cb42-4"><a href="final-prep-for-analysis.html#cb42-4"></a>df[[<span class="st">&#39;EnterDt&#39;</span>, <span class="st">&#39;ResolvDt&#39;</span>, <span class="st">&#39;wait_time&#39;</span>]].head()</span></code></pre></div>
<pre><code>##               EnterDt            ResolvDt        wait_time
## 0 2013-07-15 23:35:00 2013-07-17 05:50:00  1 days 06:15:00
## 1 2013-07-15 20:05:00 2013-07-24 16:58:00  8 days 20:53:00
## 2 2013-07-15 20:00:00 2013-07-25 14:42:00  9 days 18:42:00
## 3 2013-07-15 19:55:00 2013-07-18 06:06:00  2 days 10:11:00
## 4 2013-07-15 19:50:00 2013-08-02 06:08:00 17 days 10:18:00</code></pre>
<p>The problem in this case isn’t the result - it looks fine - it’s that we actually need a <em>number</em>. So we need to convert “1 days, 6 hours, 4 minutes and 34 seconds” into some sort of decimal.</p>
<p>Besides the technical question, there’s an emotional one: do we talk about this in terms of hours, or in terms of days? It seems to me that saying “It took 2 days longer to fix a pothole” sounds more natural than “it took 48 hours longer,” so let’s go with days.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb44-1"><a href="final-prep-for-analysis.html#cb44-1"></a>df[<span class="st">&#39;wait_days&#39;</span>] <span class="op">=</span> df.wait_time.dt.days</span>
<span id="cb44-2"><a href="final-prep-for-analysis.html#cb44-2"></a>df.head(<span class="dv">5</span>)</span></code></pre></div>
<pre><code>##               EnterDt           PrintDt            ResolvDt  \
## 0 2013-07-15 23:35:00  2013-07-16 05:46 2013-07-17 05:50:00   
## 1 2013-07-15 20:05:00  2013-07-16 05:46 2013-07-24 16:58:00   
## 2 2013-07-15 20:00:00  2013-07-16 05:56 2013-07-25 14:42:00   
## 3 2013-07-15 19:55:00  2013-07-16 05:46 2013-07-18 06:06:00   
## 4 2013-07-15 19:50:00  2013-07-16 05:46 2013-08-02 06:08:00   
## 
##                address         GEOID      Geo_FIPS  pct_white  pct_minority  \
## 0       3839 N 10TH ST  5.507900e+10  5.507900e+10   0.024051      0.975949   
## 1    4900 W MELVINA ST  5.507900e+10  5.507900e+10   0.088248      0.911752   
## 2  2400 W WISCONSIN AV  5.507901e+10  5.507901e+10   0.403137      0.596863   
## 3    1800 W HAMPTON AV  5.507900e+10  5.507900e+10   0.043894      0.956106   
## 4       4718 N 19TH ST  5.507900e+10  5.507900e+10   0.043894      0.956106   
## 
##          wait_time  wait_days  
## 0  1 days 06:15:00        1.0  
## 1  8 days 20:53:00        8.0  
## 2  9 days 18:42:00        9.0  
## 3  2 days 10:11:00        2.0  
## 4 17 days 10:18:00       17.0</code></pre>
<p>The problem is that we’re really missing all of the time <em>between</em> days here, and it’s all whole numbers - 3 days, 5 days, etc. Fractions of days might be a little better, but it means we can’t use the nice and friendly <code>.dt.days</code>. Instaed we’ll need to use <code>.dt.components['days']</code> and the like, which is a little slower.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb46-1"><a href="final-prep-for-analysis.html#cb46-1"></a><span class="co"># Hours get divided by 24, so 12 hours is 0.5 days</span></span>
<span id="cb46-2"><a href="final-prep-for-analysis.html#cb46-2"></a>df[<span class="st">&#39;wait_days&#39;</span>] <span class="op">=</span> df.wait_time.dt.components[<span class="st">&#39;days&#39;</span>] <span class="op">+</span> (df.wait_time.dt.components[<span class="st">&#39;hours&#39;</span>] <span class="op">/</span> <span class="dv">24</span>)</span>
<span id="cb46-3"><a href="final-prep-for-analysis.html#cb46-3"></a>df.head(<span class="dv">5</span>)</span></code></pre></div>
<pre><code>##               EnterDt           PrintDt            ResolvDt  \
## 0 2013-07-15 23:35:00  2013-07-16 05:46 2013-07-17 05:50:00   
## 1 2013-07-15 20:05:00  2013-07-16 05:46 2013-07-24 16:58:00   
## 2 2013-07-15 20:00:00  2013-07-16 05:56 2013-07-25 14:42:00   
## 3 2013-07-15 19:55:00  2013-07-16 05:46 2013-07-18 06:06:00   
## 4 2013-07-15 19:50:00  2013-07-16 05:46 2013-08-02 06:08:00   
## 
##                address         GEOID      Geo_FIPS  pct_white  pct_minority  \
## 0       3839 N 10TH ST  5.507900e+10  5.507900e+10   0.024051      0.975949   
## 1    4900 W MELVINA ST  5.507900e+10  5.507900e+10   0.088248      0.911752   
## 2  2400 W WISCONSIN AV  5.507901e+10  5.507901e+10   0.403137      0.596863   
## 3    1800 W HAMPTON AV  5.507900e+10  5.507900e+10   0.043894      0.956106   
## 4       4718 N 19TH ST  5.507900e+10  5.507900e+10   0.043894      0.956106   
## 
##          wait_time  wait_days  
## 0  1 days 06:15:00   1.250000  
## 1  8 days 20:53:00   8.833333  
## 2  9 days 18:42:00   9.750000  
## 3  2 days 10:11:00   2.416667  
## 4 17 days 10:18:00  17.416667</code></pre>
<p>Now we have our dataset ready for analysis, with each row having a time that it took to fix the potholes and a number describining the demographics of that census tract.</p>
</div>
<div id="removing-missing-data" class="section level3">
<h3><span class="header-section-number">2.5.3</span> Removing missing data</h3>
<p>When we’re doing our final analysis, we want to make sure we’re only working with data that’s actually exists. While it makes sense to not use missing data, missing data also causes a lot of analysis packages to throw errors!</p>
<p>We’ll get rid of anything that’s missing the fields we’re interested in - race percentages, along with number of days wait. We’ll want to compare the number of rows before and after to make sure we don’t lose too many.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb48-1"><a href="final-prep-for-analysis.html#cb48-1"></a>df.shape</span></code></pre></div>
<pre><code>## (12836, 10)</code></pre>
<div class="sourceCode" id="cb50"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb50-1"><a href="final-prep-for-analysis.html#cb50-1"></a>df <span class="op">=</span> df.dropna(subset<span class="op">=</span>[<span class="st">&#39;pct_white&#39;</span>, <span class="st">&#39;wait_days&#39;</span>])</span>
<span id="cb50-2"><a href="final-prep-for-analysis.html#cb50-2"></a>df.shape</span></code></pre></div>
<pre><code>## (12783, 10)</code></pre>
<p>If you end up with a lot of rows that disappear between these two stages, you should take a look to see if something might have gone wrong with your data. In this case we didn’t lose too many, though, so we should be okay.</p>
<div id="one-more-cleaning" class="section level4">
<h4><span class="header-section-number">2.5.3.1</span> One more cleaning</h4>
<p>While we’re fixing up our data, I’m going to remove the datetime fields we created. I normally wouldn’t do this, but they’re actually messing with my publishing system!</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb52-1"><a href="final-prep-for-analysis.html#cb52-1"></a>df <span class="op">=</span> df.drop(columns<span class="op">=</span>[<span class="st">&#39;EnterDt&#39;</span>,<span class="st">&#39;PrintDt&#39;</span>,<span class="st">&#39;ResolvDt&#39;</span>,<span class="st">&#39;wait_time&#39;</span>])</span></code></pre></div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="merging-our-datasets.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="linear-regression.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 1
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
