<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4.1 Linear Regression | _main.utf8.md</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.14 and GitBook 2.6.7" />

  <meta property="og:title" content="4.1 Linear Regression | _main.utf8.md" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4.1 Linear Regression | _main.utf8.md" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="analyzing-our-data.html"/>
<link rel="next" href="interpreting-coefficients.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  { color: #cccccc; background-color: #303030; }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ffcfaf; } /* Alert */
code span.an { color: #7f9f7f; font-weight: bold; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #dca3a3; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #f0dfaf; } /* ControlFlow */
code span.ch { color: #dca3a3; } /* Char */
code span.cn { color: #dca3a3; font-weight: bold; } /* Constant */
code span.co { color: #7f9f7f; } /* Comment */
code span.cv { color: #7f9f7f; font-weight: bold; } /* CommentVar */
code span.do { color: #7f9f7f; } /* Documentation */
code span.dt { color: #dfdfbf; } /* DataType */
code span.dv { color: #dcdccc; } /* DecVal */
code span.er { color: #c3bf9f; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #c0bed1; } /* Float */
code span.fu { color: #efef8f; } /* Function */
code span.im { } /* Import */
code span.in { color: #7f9f7f; font-weight: bold; } /* Information */
code span.kw { color: #f0dfaf; } /* Keyword */
code span.op { color: #f0efd0; } /* Operator */
code span.ot { color: #efef8f; } /* Other */
code span.pp { color: #ffcfaf; font-weight: bold; } /* Preprocessor */
code span.sc { color: #dca3a3; } /* SpecialChar */
code span.ss { color: #cc9393; } /* SpecialString */
code span.st { color: #cc9393; } /* String */
code span.va { } /* Variable */
code span.vs { color: #cc9393; } /* VerbatimString */
code span.wa { color: #7f9f7f; font-weight: bold; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i><b>2</b> Preface</a><ul>
<li class="chapter" data-level="2.0.1" data-path="preface.html"><a href="preface.html#the-original-story"><i class="fa fa-check"></i><b>2.0.1</b> The original story</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="the-data.html"><a href="the-data.html"><i class="fa fa-check"></i><b>3</b> The Data</a><ul>
<li class="chapter" data-level="3.1" data-path="turning-our-question-into-measureables.html"><a href="turning-our-question-into-measureables.html"><i class="fa fa-check"></i><b>3.1</b> Turning our question into measureables</a></li>
<li class="chapter" data-level="3.2" data-path="data-life-expectancy.html"><a href="data-life-expectancy.html"><i class="fa fa-check"></i><b>3.2</b> Data: Life expectancy</a><ul>
<li class="chapter" data-level="3.2.1" data-path="data-life-expectancy.html"><a href="data-life-expectancy.html#the-data-dictionary"><i class="fa fa-check"></i><b>3.2.1</b> The data dictionary</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data-unemployment.html"><a href="data-unemployment.html"><i class="fa fa-check"></i><b>3.3</b> Data: Unemployment</a><ul>
<li class="chapter" data-level="3.3.1" data-path="data-unemployment.html"><a href="data-unemployment.html#picking-a-data-source-editorial-choice"><i class="fa fa-check"></i><b>3.3.1</b> Picking a data source (editorial choice)</a></li>
<li class="chapter" data-level="3.3.2" data-path="data-unemployment.html"><a href="data-unemployment.html#picking-a-survey-year"><i class="fa fa-check"></i><b>3.3.2</b> Picking a survey year</a></li>
<li class="chapter" data-level="3.3.3" data-path="data-unemployment.html"><a href="data-unemployment.html#picking-an-unemployment-table"><i class="fa fa-check"></i><b>3.3.3</b> Picking an unemployment table</a></li>
<li class="chapter" data-level="3.3.4" data-path="data-unemployment.html"><a href="data-unemployment.html#the-data-dictionary-1"><i class="fa fa-check"></i><b>3.3.4</b> The data dictionary</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="data-demographics.html"><a href="data-demographics.html"><i class="fa fa-check"></i><b>3.4</b> Data: Demographics</a></li>
<li class="chapter" data-level="3.5" data-path="combining-our-datasets.html"><a href="combining-our-datasets.html"><i class="fa fa-check"></i><b>3.5</b> Combining our datasets</a><ul>
<li class="chapter" data-level="3.5.1" data-path="combining-our-datasets.html"><a href="combining-our-datasets.html#reading-in-life-expectancy"><i class="fa fa-check"></i><b>3.5.1</b> Reading in life expectancy</a></li>
<li class="chapter" data-level="3.5.2" data-path="combining-our-datasets.html"><a href="combining-our-datasets.html#reading-in-unemployment"><i class="fa fa-check"></i><b>3.5.2</b> Reading in unemployment</a></li>
<li class="chapter" data-level="3.5.3" data-path="combining-our-datasets.html"><a href="combining-our-datasets.html#final-joining"><i class="fa fa-check"></i><b>3.5.3</b> Final joining</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="analyzing-our-data.html"><a href="analyzing-our-data.html"><i class="fa fa-check"></i><b>4</b> Analyzing our data</a><ul>
<li class="chapter" data-level="4.1" data-path="linear-regression.html"><a href="linear-regression.html"><i class="fa fa-check"></i><b>4.1</b> Linear Regression</a></li>
<li class="chapter" data-level="4.2" data-path="interpreting-coefficients.html"><a href="interpreting-coefficients.html"><i class="fa fa-check"></i><b>4.2</b> Interpreting coefficients</a><ul>
<li class="chapter" data-level="4.2.1" data-path="interpreting-coefficients.html"><a href="interpreting-coefficients.html#understanding-const"><i class="fa fa-check"></i><b>4.2.1</b> Understanding const</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="improving-our-analysis.html"><a href="improving-our-analysis.html"><i class="fa fa-check"></i><b>5</b> Improving our analysis</a><ul>
<li class="chapter" data-level="5.0.1" data-path="improving-our-analysis.html"><a href="improving-our-analysis.html#reading-in-and-processing-our-data"><i class="fa fa-check"></i><b>5.0.1</b> Reading in and processing our data</a></li>
<li class="chapter" data-level="5.1" data-path="performing-the-multivariate-regression.html"><a href="performing-the-multivariate-regression.html"><i class="fa fa-check"></i><b>5.1</b> Performing the multivariate regression</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>6</b> Conclusion</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="linear-regression" class="section level2">
<h2><span class="header-section-number">4.1</span> Linear Regression</h2>
<p>Before we do our regression, we want to make sure we don’t have any <strong>missing data</strong>. No one likes missing data, but linear regression dislikes it most of all. If we’re missing numbers for unemployment or life expectancy for any of our census tracts, our regression just plain won’t work!</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="linear-regression.html#cb11-1"></a><span class="co"># Check how many rows we have to start with</span></span>
<span id="cb11-2"><a href="linear-regression.html#cb11-2"></a>df.shape</span></code></pre></div>
<pre><code>## (65662, 6)</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><a href="linear-regression.html#cb13-1"></a><span class="co"># Drop everything missing, see how many are left</span></span>
<span id="cb13-2"><a href="linear-regression.html#cb13-2"></a>df <span class="op">=</span> df.dropna()</span>
<span id="cb13-3"><a href="linear-regression.html#cb13-3"></a>df.shape</span></code></pre></div>
<pre><code>## (65662, 6)</code></pre>
<p>Once we’re sure we have our columns and have ditched any missing data, we’re free to run our regression.</p>
<p>When you run a regression you have two variables - and <code>X</code> and a <code>y</code> (and yes, they’re usually capitalized like that). Speaking simply, <code>X</code> is the cause and <code>y</code> is the result - in this case, we’re claiming something similar to “unemployment causes a change in life expectancy,” so <code>X</code> is unemployment and <code>y</code> is life expectancy.</p>
<p>Let’s start by pulling out our <code>X</code>, our unemployment percentage.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><a href="linear-regression.html#cb15-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb15-2"><a href="linear-regression.html#cb15-2"></a></span>
<span id="cb15-3"><a href="linear-regression.html#cb15-3"></a>X <span class="op">=</span> df[[<span class="st">&#39;unemployed_pct&#39;</span>]]</span>
<span id="cb15-4"><a href="linear-regression.html#cb15-4"></a>X.head()</span></code></pre></div>
<pre><code>##    unemployed_pct
## 0        3.474903
## 1        6.701329
## 2        6.308411
## 3        2.695779
## 4        6.654991</code></pre>
<p>Linear regressions always have one value for <code>y</code>, but can have <em>multiple</em> values for <code>X</code> - for example, later we’ll look at how unemployment <em>and</em> income affect life expectancy. That’s why up above we end up with a dataframe, which can hold multiple possible columns.</p>
<p>When we pull out <code>y</code> below, you’ll notice is a <em>series</em> instead, just one single column of values. Unlike our inputs, our outcome is only ever one number.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb17-1"><a href="linear-regression.html#cb17-1"></a>y <span class="op">=</span> df.life_expectancy</span>
<span id="cb17-2"><a href="linear-regression.html#cb17-2"></a>y.head()</span></code></pre></div>
<pre><code>## 0    73.1
## 1    76.9
## 2    75.4
## 3    79.4
## 4    73.1
## Name: life_expectancy, dtype: float64</code></pre>
<p>Now that we have our <code>X</code> and <code>y</code>, we can run the actual regression. We’ll be using <code>statsmodels</code>, one of the popular Python packages for doing statistical analysis (another being scikit-learn). I’m going to move setting <code>X</code> and <code>y</code> into the same code block, too, just so we can see it all at once.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb19-1"><a href="linear-regression.html#cb19-1"></a><span class="co"># Create our X and y</span></span>
<span id="cb19-2"><a href="linear-regression.html#cb19-2"></a>X <span class="op">=</span> df[[<span class="st">&#39;unemployed_pct&#39;</span>]]</span>
<span id="cb19-3"><a href="linear-regression.html#cb19-3"></a>y <span class="op">=</span> df.life_expectancy</span>
<span id="cb19-4"><a href="linear-regression.html#cb19-4"></a></span>
<span id="cb19-5"><a href="linear-regression.html#cb19-5"></a>X <span class="op">=</span> sm.add_constant(X)</span></code></pre></div>
<pre><code>## /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/numpy/core/fromnumeric.py:2495: FutureWarning: Method .ptp is deprecated and will be removed in a future version. Use numpy.ptp instead.
##   return ptp(axis=axis, out=out, **kwargs)</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb21-1"><a href="linear-regression.html#cb21-1"></a>model <span class="op">=</span> sm.OLS(y,X)</span>
<span id="cb21-2"><a href="linear-regression.html#cb21-2"></a></span>
<span id="cb21-3"><a href="linear-regression.html#cb21-3"></a>results <span class="op">=</span> model.fit()</span>
<span id="cb21-4"><a href="linear-regression.html#cb21-4"></a>results.summary()</span></code></pre></div>
<pre><code>## &lt;class &#39;statsmodels.iolib.summary.Summary&#39;&gt;
## &quot;&quot;&quot;
##                             OLS Regression Results                            
## ==============================================================================
## Dep. Variable:        life_expectancy   R-squared:                       0.169
## Model:                            OLS   Adj. R-squared:                  0.169
## Method:                 Least Squares   F-statistic:                 1.336e+04
## Date:                Sun, 01 Dec 2019   Prob (F-statistic):               0.00
## Time:                        21:17:49   Log-Likelihood:            -1.7810e+05
## No. Observations:               65662   AIC:                         3.562e+05
## Df Residuals:                   65660   BIC:                         3.562e+05
## Df Model:                           1                                         
## Covariance Type:            nonrobust                                         
## ==================================================================================
##                      coef    std err          t      P&gt;|t|      [0.025      0.975]
## ----------------------------------------------------------------------------------
## const             81.1377      0.028   2856.410      0.000      81.082      81.193
## unemployed_pct    -0.5214      0.005   -115.595      0.000      -0.530      -0.513
## ==============================================================================
## Omnibus:                      616.108   Durbin-Watson:                   1.117
## Prob(Omnibus):                  0.000   Jarque-Bera (JB):              807.895
## Skew:                          -0.146   Prob(JB):                    3.70e-176
## Kurtosis:                       3.459   Cond. No.                         12.8
## ==============================================================================
## 
## Warnings:
## [1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
## &quot;&quot;&quot;</code></pre>
<p>The code that learns from our data is called the <strong>model</strong>. After the model analyzes each row of our data, it decides the relationship between <code>unemployed_pct</code> and <code>life_expectancy</code>. This relationship then shows up under the <code>coef</code> section.</p>
<p>Under <code>coef</code> it lists <code>unemployed_pct</code> as <code>-0.5214</code>… but what’s that mean?</p>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="analyzing-our-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="interpreting-coefficients.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 1
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
